<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>HPCL IN_OUT</title>
	<link rel="icon" th:href="@{/img/Hindustan.png}" type="image/png">
	<link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css}" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script th:src="@{https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js}"
		integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
		crossorigin="anonymous"></script>
	<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js}"
		integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
		crossorigin="anonymous"></script>
	<script th:src="@{https://kit.fontawesome.com/39708105a9.js}" crossorigin="anonymous"></script>
		<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">

	<link rel="stylesheet" th:href="@{/css/login.css}">

	<style>
		body {
			margin: 0;
			padding: 0;
			height: 100vh;
			display: flex;
			justify-content: center;
			align-items: center;
			background-image: url('/img/inoutrefinary.png');
			background-size: cover;
			/* Ensures background covers all screen sizes */
			background-repeat: no-repeat;
			position: relative;
			background-attachment: fixed;
			font-family: 'Montserrat', sans-serif;
		}

		body::before {
			content: url('/img/inoutrefinary.png');
			display: none;
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.3);
			z-index: 1;
		}

		.login-container,
		.login-form form {
			position: relative;
			z-index: 2;
		}

		.login-container {
			display: flex;
			height: 80vh;
			/* Relative height for responsiveness */
			border-radius: 15px;
			overflow: hidden;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
			background-color: white;
			width: 70%;
			/* Increased base width */
			max-width: 700px;
			/* Increased max width */
			min-width: 300px;
			/* Minimum width for small screens */
			margin: 0 auto;
			/* Center the container */
		}

		.left-panel {
			position: relative;
			background-color: #002d7f;
			color: #fff;
			padding: 5vh 5vw;
			/* Relative padding */
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			border-top-left-radius: 0;
			border-bottom-left-radius: 200px;
			border-top-right-radius: 200px;
			overflow: hidden;
			flex: 0.4;
			/* Reduced flex ratio to make left panel narrower */
			min-width: 30%;
			/* Reduced min-width */
			box-sizing: border-box;
		}

		.left-panel::before {
			content: '';
			position: absolute;
			top: 0;
			right: 0;
			width: 100%;
			height: 100%;
			background: inherit;
			clip-path: path("M0,0 H90% A150,150 0 0 1 100%,50% A150,150 0 0 1 90%,100% H0 Z");
			z-index: 1;
		}

		.left-panel img {
			max-width: 100%;
			/* Scale with container */
			width: 150px;
			/* Default width */
			margin-bottom: 20px;
			position: relative;
			z-index: 2;
			height: auto;
			/* Maintain aspect ratio */
		}

		.left-panel h2 {
			font-size: 1.5rem;
			/* Relative font size */
			margin: 0;
			position: relative;
			z-index: 2;
			text-align: center;
			word-wrap: break-word;
			/* Prevent text overflow */

		}

		.right-panel {
			width: 70%;
			/* Increased width to accommodate a wider form */
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			padding: 2vh 2vw;
			/* Relative padding */
			border-top-right-radius: 15px;
			border-bottom-right-radius: 15px;
			flex: 0.6;
			/* Increased flex ratio */
			box-sizing: border-box;
		}

		.login-title {
			text-align: center;
			color: #0B2F8B;
			margin-bottom: 1vh;
			font-size: 1.75rem;
			/* Relative font size */
			font-weight: 700;
			word-wrap: break-word;
			/* Prevent text overflow */
			max-width: 100%;
			/* Ensure text fits within the panel */

		}

		.login-subtitle {
			text-align: center;
			color: #0B2F8B;
			font-size: 0.875rem;
			/* Relative font size */
			margin-bottom: 2vh;
			font-weight: 600;
			word-wrap: break-word;
			/* Prevent text overflow */
			max-width: 100%;
			/* Ensure text fits within the panel */
			padding: 0 1vw;
			/* Add padding to prevent edge overflow */
		}

		.login-form {
			background-color: #F7F2F7;
			padding: 1rem;
			/* Relative padding */
			border-radius: 10px;
			width: 100%;
			max-width: 500px;
			/* Increased max width for better appearance */
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
			box-sizing: border-box;
		}

		.login-form .form-label {
			font-weight: bold;
		}

		.login-form .form-control {
			border: 1px solid #ced4da;
			border-radius: 5px;
			padding: 0.75rem;
			/* Relative padding */
			width: 100%;
			box-sizing: border-box;
		}

		.login-form .btn-primary {
			background-color: #003087;
			border: none;
			padding: 0.75rem;
			/* Relative padding */
			width: 50%;
			font-size: 1rem;
			/* Relative font size */
			margin-left: 25%;
			/* Centered button */
		}

		.login-form .btn-primary:hover {
			background-color: #002766;
		}

		.password-field {
			position: relative;
		}

		.password-field .form-control {
			padding-right: 2.5rem;
			/* Adjusted for icon */
		}

		.password-field .fas {
			position: absolute;
			top: 66%;
			right: 0.75rem;
			transform: translateY(-50%);
			cursor: pointer;
			color: #6c757d;
			z-index: 3;
		}

		.alert-fixed {
			position: fixed;
			top: 20px;
			left: 50%;
			transform: translateX(-50%);
			z-index: 1000;
			transition: opacity 1s;
		}

		/* Media Queries for Responsiveness */
		@media (max-width: 1024px) {
			.login-container {
				width: 87%;
				max-width: 736px;
			}

			.left-panel {
				flex: 0.35;
				/* Slightly narrower on tablets */
				min-width: 51%;
				padding: 4vh 4vw;
			}

			.right-panel {
				width: 75%;
				/* Slightly wider on tablets */
				flex: 0.65;
			}

			.login-form {
				padding: 0.5rem;
				max-width: 450px;
			}
		}

		@media (max-width: 768px) {
			.login-container {
				flex-direction: column;
				height: auto;
				width: 85%;
				max-width: 500px;
				min-height: 400px;
			}

			.left-panel {
				min-width: 100%;
				border-bottom-left-radius: 0;
				border-top-right-radius: 0;
				border-bottom-right-radius: 200px;
				padding: 3vh 3vw;
				flex: 0.4;
				/* Reset flex for mobile */
			}

			.left-panel::before {
				clip-path: path("M0,0 H100% A150,150 0 0 1 100%,100% H0 Z");
			}

			.right-panel {
				width: 100%;
				padding: 1.5vh 1.5vw;
				flex: 0.6;
				/* Reset flex for mobile */
			}

			.login-title {
				font-size: 1.5rem;
			}

			.login-subtitle {
				font-size: 0.75rem;
			}

			.login-form {
				padding: 1.25rem;
				max-width: 100%;
			}

			.login-form .btn-primary {
				width: 100%;
				margin-left: 0;
			}
		}

		@media (max-width: 480px) {
			.login-container {
				width: 90%;
				min-height: 350px;
			}

			.left-panel {
				padding: 2vh 2vw;
			}

			.left-panel img {
				max-width: 100px;
				width: 100px;
			}

			.left-panel h2 {
				font-size: 1.25rem;
			}

			.login-title {
				font-size: 1.25rem;
			}

			.login-subtitle {
				font-size: 0.7rem;
			}

			.login-form {
				padding: 1rem;
				max-width: 100%;
			}

			.login-form .btn-primary {
				font-size: 0.9rem;
			}
		}

		@media (max-width: 320px) {
			.login-container {
				min-height: 300px;
			}

			.left-panel img {
				max-width: 80px;
				width: 80px;
			}

			.left-panel h2 {
				font-size: 1rem;
			}

			.login-title {
				font-size: 1rem;
			}

			.login-subtitle {
				font-size: 0.6rem;
			}

			.login-form .btn-primary {
				font-size: 0.8rem;
			}
		}
	</style>
</head>

<body>
	<!-- Error Message -->
	<div th:if="${error}" id="error" class="alert alert-danger text-center alert-fixed" role="alert">
		<strong th:text="${error}"></strong>
	</div>

	<div class="login-container">
		<div class="left-panel">
			<img th:src="@{/img/Hindustan.png}" alt="Custom Logo">
			<h2>Welcome Back!</h2>
		</div>
		<div class="right-panel">
			<div class="login-title">HPCL INOUT SYSTEM</div>
			<div class="login-subtitle">Sinnar LPG Bottling Plant</div>
			<div class="login-form">
				<form th:action="@{/login}" method="post">
					<div class="mb-3">
						<label for="username" class="form-label">Username:</label>
						<input name="username" id="username" class="form-control" type="text" pattern="[a-zA-Z]+"
							title="Please enter only letters" placeholder="Enter Username" required>
					</div>
					<div class="mb-3 password-field">
						<label for="password" class="form-label">Password:</label>
						<input name="password" id="password" class="form-control" type="password"
							placeholder="Enter Password" required>
						<i class="fas fa-eye" id="togglePassword"></i>
					</div>
					<button type="submit" class="btn btn-primary">Login</button>
					<!--<div class="mt-4" th:if="${onedayremain != true}">
						<p class="text-center text-danger"
							th:text="${remainingdays} + ' Days Remaining For License to Expire'"></p>
					</div>-->
					<div class="mt-4" th:if="${onedayremain == true}">
						<p class="text-center text-danger" th:text="'Your License will expire tomorrow'"></p>
					</div>
				</form>
			</div>
		</div>
	</div>

	<script>
		// Password toggle functionality
		document.getElementById('togglePassword').addEventListener('click', function () {
			const password = document.getElementById('password');
			const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
			password.setAttribute('type', type);
			this.classList.toggle('fa-eye');
			this.classList.toggle('fa-eye-slash');
		});

		// Error message fade-out functionality
		document.addEventListener('DOMContentLoaded', function () {
			var errorMessage = document.getElementById('error');
			if (errorMessage) {
				setTimeout(function () {
					errorMessage.style.opacity = 0;
					setTimeout(function () {
						errorMessage.style.display = 'none';
						adjustLayout();
					}, 1000); // fade out duration (1 second)
				}, 2000); // display duration (2 seconds)
			}
		});

		// Layout adjustment function
		function adjustLayout() {
			var formContainer = document.querySelector('.login-container');
			var formContainerHeight = formContainer.offsetHeight;
			formContainer.style.height = formContainerHeight + 'px';
		}

		// Page reload handling
		window.addEventListener('pageshow', function (event) {
			if (event.persisted) {
				window.location.href = '/login';
			}
		});
	</script>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>
</body>

</html>